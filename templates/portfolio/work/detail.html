{% extends 'portfolio/base_portfolio.html' %}

{% block title %}{{ artwork.title }}{% endblock %}

{% block content %}
<div class="min-h-screen lg:flex">
    <!-- Image Section (Left/Top) -->
    <div class="lg:w-3/5 bg-neutral-50">
        <div 
            class="h-[70vh] lg:h-full relative"
            x-data="{ 
                currentImage: 0,
                images: [
                    '/media/{{ artwork.image }}',
                    {% if artwork.image_detail_1 %}'/media/{{ artwork.image_detail_1 }}',{% endif %}
                    {% if artwork.image_detail_2 %}'/media/{{ artwork.image_detail_2 }}',{% endif %}
                    {% if artwork.image_detail_3 %}'/media/{{ artwork.image_detail_3 }}',{% endif %}
                ]
            }"
        >
            <!-- Main Image -->
            <template x-for="(img, index) in images" :key="index">
                <img 
                    :src="img" 
                    :alt="'{{ artwork.title }}'"
                    class="absolute inset-0 w-full h-full object-contain p-8 lg:p-16 transition-opacity duration-500"
                    :class="currentImage === index ? 'opacity-100' : 'opacity-0'"
                >
            </template>
            
            <!-- Image Navigation (if multiple images) -->
            <template x-if="images.length > 1">
                <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2">
                    <template x-for="(img, index) in images" :key="index">
                        <button 
                            @click="currentImage = index"
                            class="w-2 h-2 rounded-full transition-all"
                            :class="currentImage === index ? 'bg-neutral-900 w-8' : 'bg-neutral-400'"
                        ></button>
                    </template>
                </div>
            </template>
            
            <!-- Arrow Navigation -->
            <template x-if="images.length > 1">
                <div>
                    <button 
                        @click="currentImage = (currentImage - 1 + images.length) % images.length"
                        class="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center hover:bg-neutral-200 transition-colors rounded-full"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <button 
                        @click="currentImage = (currentImage + 1) % images.length"
                        class="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center hover:bg-neutral-200 transition-colors rounded-full"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </template>
        </div>
    </div>
    
    <!-- Info Section (Right/Bottom) -->
    <div class="lg:w-1/3 px-6 md:px-12 py-12 lg:py-24 lg:pt-32">
        <!-- Breadcrumb -->
        <nav class="text-sm text-neutral-500 mb-8">
            <a href="{% url 'portfolio:work_index' %}" class="hover:text-neutral-900 transition-colors">Work</a>
            <span class="mx-2">/</span>
            <a href="{% url 'portfolio:work_category' category %}" class="hover:text-neutral-900 transition-colors">{{ artwork.get_medium_display_full }}</a>
        </nav>
        
        <!-- Artwork Details -->
        <h1 class="text-3xl md:text-4xl font-serif mb-4">{{ artwork.title }}</h1>
        
        <dl class="space-y-4 text-sm border-t border-neutral-200 pt-6 mt-6">
            <div class="flex justify-between">
                <dt class="text-neutral-500">Year</dt>
                <dd>{{ artwork.year }}</dd>
            </div>
            <div class="flex justify-between">
                <dt class="text-neutral-500">Medium</dt>
                <dd>{{ artwork.get_medium_display_full }}</dd>
            </div>
            <div class="flex justify-between">
                <dt class="text-neutral-500">Dimensions</dt>
                <dd>{{ artwork.dimensions }}</dd>
            </div>
            {% if artwork.is_available %}
            <div class="flex justify-between">
                <dt class="text-neutral-500">Price</dt>
                <dd class="font-medium">Â£{{ artwork.price|floatformat:0 }}</dd>
            </div>
            {% endif %}
        </dl>
        
        {% if artwork.description %}
        <div class="mt-8 pt-6 border-t border-neutral-200">
            <p class="text-neutral-600 leading-relaxed">{{ artwork.description }}</p>
        </div>
        {% endif %}
        
        <!-- Enquire Button -->
        <div class="mt-8">
            {% if artwork.is_available %}
            <a 
                href="{% url 'portfolio:contact' %}?artwork={{ artwork.slug }}"
                class="block w-full py-3 text-center text-sm tracking-widest uppercase border border-neutral-900 hover:bg-neutral-900 hover:text-white transition-colors"
            >
                Enquire
            </a>
            {% else %}
            <p class="text-center text-sm text-neutral-500 py-3 border border-neutral-200">
                Sold
            </p>
            {% endif %}
        </div>
        
        <!-- Navigation -->
        <div class="mt-12 pt-6 border-t border-neutral-200 flex justify-between text-sm">
            {% if prev_work %}
            <a 
                href="{% url 'portfolio:work_detail' category prev_work.slug %}"
                class="flex items-center gap-2 hover:opacity-60 transition-opacity"
            >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19l-7-7 7-7"/>
                </svg>
                Previous
            </a>
            {% else %}
            <span></span>
            {% endif %}
            
            {% if next_work %}
            <a 
                href="{% url 'portfolio:work_detail' category next_work.slug %}"
                class="flex items-center gap-2 hover:opacity-60 transition-opacity"
            >
                Next
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/>
                </svg>
            </a>
            {% else %}
            <span></span>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
